<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>DragManager</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><link rel="stylesheet" type="text/css" href="scaleformTemplate.css" /><script src="jquery.js" type="text/javascript">//</script><script src="common.js" type="text/javascript">//</script><script src="jsdoc.js" type="text/javascript">//</script></head><body id="page_gfx_managers_DragManager"><script type="text/javascript">VisDoc.initBody();</script><div id="PageTop"><!----></div><div class="VisDoc"><div class="content"><div class="docNav"><ul class="accessKeyLinks"><li><a href="#Summary" accesskey="s"><span class="accessKey">S</span>ummary</a></li><li><a href="#Constructor" accesskey="c"><span class="accessKey">C</span>onstructors</a></li><li><a href="#Classproperties" accesskey="l">C<span class="accessKey">l</span>ass properties</a></li><li><a href="#Instanceproperties" accesskey="l">Instance <span class="accessKey">p</span>roperties</a></li><li><a href="#Instancemethods" accesskey="m">Instance <span class="accessKey">m</span>ethods</a></li></ul><br class="clear" /></div><h1>DragManager</h1><div class="classProperties"><table cellspacing="0"><tr><th align="left">Kind of class:</th><td>class</td></tr><tr><th align="left">Inherits from:</th><td><a class="className" href="gfx_events_EventDispatcher.html">EventDispatcher</a></td></tr><tr><th class="classDetails" align="left">Classpath:</th><td class="classDetails">gfx.managers.DragManager</td></tr><tr><th class="classDetails" align="left">File last modified:</th><td class="classDetails">Monday, 05 April 2010, 10:09:52</td></tr></table></div><div class="classDescription"><span class="descriptionSummary">Singleton class providing methods to initiate and manage drag and drop operations.</span> Used by DragTarget, InventorySlot, and ItemSlot components.<br /> <br />  <b>Events</b><ul><li><i>dragEnd</i>: Dispatched when a drag operation ends, either because the mouse was released, or because cancelDrag was called. The event object includes the following properties:<ul><li><i>cancelled</i>: indicates whether the drag was ended by calling cancelDrag</li><li><i>data</i>: the data associated with the drag operation</li><li><i>dropTarget</i>: the current drop target (ie. what is currently dragged over)</li></ul></li><li><i>dragBegin</i>: Dispatched when a drag operation begins. Includes the following properties:<ul><li><i>data</i>: the data associated with the drag operation</li></ul></li></ul></div><div class="summary"><h2 id="Summary">Summary</h2><div class="docNav"><br class="clear" /></div><div class="memberList"><div class="memberSummaryPart"><span class="title">Class properties</span><ul class="sortable" id="sortul1"><li class="sortli listnum1"><a href="#instance">instance</a><ul class="summary"><li>Returns a reference to the DragManager instance.</li></ul></li></ul></div><div class="memberSummaryPart"><span class="title">Instance properties</span><ul class="sortable" id="sortul2"><li class="sortli listnum1"><a href="#removeTarget">removeTarget</a><ul class="summary"><li>Indicates whether the target will be removed when the drag finishes.</li></ul></li><li class="sortli listnum2"><a href="#dragOffsetX">dragOffsetX</a><ul class="summary"><li>Specifies the x offset of the drag target from the cursor position.</li></ul></li><li class="sortli listnum3"><a href="#dragOffsetY">dragOffsetY</a><ul class="summary"><li>Specifies the y offset of the drag target from the cursor position.</li></ul></li><li class="sortli listnum4"><a href="#cancelKeyCode">cancelKeyCode</a><ul class="summary"><li>Indicates the key code that will cancel a drag.</li></ul></li><li class="sortli listnum5"><a href="#dropTarget">dropTarget</a><ul class="summary"><li>Indicates the current drop target for the drag.</li></ul></li><li class="sortli listnum6"><a href="#relatedObject">relatedObject</a><ul class="summary"><li>Arbitrary data to associate with this drag operation.</li></ul></li><li class="sortli listnum7"><a href="#inDrag">inDrag</a><ul class="summary"><li>Indicates whether there is an active drag operation.</li></ul></li><li class="sortli listnum8"><a href="#data">data</a><ul class="summary"><li>Returns the data associated with the currently active drag operation, or null if there is not an active drag.</li></ul></li><li class="sortli listnum9"><a href="#target">target</a><ul class="summary"><li>Returns the target (avatar) of the currently active drag operation, or null if there is not an active drag.</li></ul></li></ul></div><div class="memberSummaryPart"><span class="title">Class methods</span><div class="boxWithBorder"><div class="boxedElem"><div class="contentHolder"><span class="title">Class methods inherited from <span class="superclass"><a class="className" href="gfx_events_EventDispatcher.html">EventDispatcher</a></span></span><div class="item inheritedList"><a class="private" href="gfx_events_EventDispatcher.html#$dispatchEvent">$dispatchEvent</a>  <a class="private" href="gfx_events_EventDispatcher.html#indexOfListener">indexOfListener</a>  <a href="gfx_events_EventDispatcher.html#initialize">initialize</a></div></div></div></div></div><div class="memberSummaryPart"><span class="title">Instance methods</span><ul class="sortable" id="sortul4"><li class="sortli listnum1"><a href="#startDrag">startDrag</a><ul class="summary"><li>Starts a drag operation.</li></ul></li><li class="sortli listnum2"><a href="#stopDrag">stopDrag</a><ul class="summary"><li>Stops an active drag operation, and dispatches the "endDrag" event with the cancelled flag set to false.</li></ul></li><li class="sortli listnum3"><a href="#initiateDrag">initiateDrag</a><ul class="summary"><li>Sets the data and inDrag properties, and dispatches the "dragBegin" event.</li></ul></li><li class="sortli listnum4"><a href="#cancelDrag">cancelDrag</a><ul class="summary"><li>Stops an active drag operation, and dispatches the "dragEnd" event with the cancelled flag set to true.</li></ul></li><li class="sortli listnum5"><a href="#update">update</a><ul class="summary"><li>Repositions the drag target relative to the cursor position.</li></ul></li></ul><div class="boxWithBorder"><div class="boxedElem"><div class="contentHolder"><span class="title">Instance methods inherited from <span class="superclass"><a class="className" href="gfx_events_EventDispatcher.html">EventDispatcher</a></span></span><div class="item inheritedList"><a href="gfx_events_EventDispatcher.html#addEventListener">addEventListener</a>  <a href="gfx_events_EventDispatcher.html#cleanUp">cleanUp</a>  <a class="private" href="gfx_events_EventDispatcher.html#cleanUpEvents">cleanUpEvents</a>  <a href="gfx_events_EventDispatcher.html#dispatchEvent">dispatchEvent</a>  <a class="private" href="gfx_events_EventDispatcher.html#dispatchQueue">dispatchQueue</a>  <a href="gfx_events_EventDispatcher.html#hasEventListener">hasEventListener</a>  <a href="gfx_events_EventDispatcher.html#removeAllEventListeners">removeAllEventListeners</a>  <a href="gfx_events_EventDispatcher.html#removeEventListener">removeEventListener</a></div></div></div></div></div></div></div><div class="memberSection"><h2 id="Classproperties">Class properties</h2><div class="member" id="instance"><h3>instance</h3><div class="fullMemberString"><div class="floatholder"><div class="floatbox code"><span class="memberAccess">static</span> <b>instance</b>:<a class="className" href="gfx_managers_DragManager.html">DragManager</a>
</div><div class="floatbox"><span class="access">(read)</span></div><br class="clear" /></div></div><div class="description"> Returns a reference to the DragManager instance. </div></div></div><div class="memberSection"><h2 id="Instanceproperties">Instance properties</h2><div class="member" id="cancelKeyCode"><h3>cancelKeyCode</h3><div class="fullMemberString"><div class="floatholder"><div class="floatbox code"><b>cancelKeyCode</b>:Number = Key.ESCAPE
</div><div class="floatbox"><span class="access">(read,write)</span></div><br class="clear" /></div></div><div class="description"> Indicates the key code that will cancel a drag. Set to 0 to disable. </div></div><div class="member" id="data"><h3>data</h3><div class="fullMemberString"><div class="floatholder"><div class="floatbox code"><b>data</b>:Object
</div><div class="floatbox"><span class="access">(read)</span></div><br class="clear" /></div></div><div class="description"> Returns the data associated with the currently active drag operation, or null if there is not an active drag. </div></div><div class="member" id="dragOffsetX"><h3>dragOffsetX</h3><div class="fullMemberString"><div class="floatholder"><div class="floatbox code"><b>dragOffsetX</b>:Number = <span class="codeNumber">0</span>
</div><div class="floatbox"><span class="access">(read,write)</span></div><br class="clear" /></div></div><div class="description"> Specifies the x offset of the drag target from the cursor position. This is automatically set to true when calling startDrag. You can override this default value after calling startDrag. You may wish to call update() after setting this value to immediately update the target's position. </div></div><div class="member" id="dragOffsetY"><h3>dragOffsetY</h3><div class="fullMemberString"><div class="floatholder"><div class="floatbox code"><b>dragOffsetY</b>:Number = <span class="codeNumber">0</span>
</div><div class="floatbox"><span class="access">(read,write)</span></div><br class="clear" /></div></div><div class="description"> Specifies the y offset of the drag target from the cursor position. This is automatically set to true when calling startDrag. You can override this default value after calling startDrag. You may wish to call update() after setting this value to immediately update the target's position. </div></div><div class="member" id="dropTarget"><h3>dropTarget</h3><div class="fullMemberString"><div class="floatholder"><div class="floatbox code"><b>dropTarget</b>:Object = <span class="codeIdentifier">null</span>
</div><div class="floatbox"><span class="access">(read,write)</span></div><br class="clear" /></div></div><div class="description"> Indicates the current drop target for the drag. </div></div><div class="member" id="inDrag"><h3>inDrag</h3><div class="fullMemberString"><div class="floatholder"><div class="floatbox code"><b>inDrag</b>:Boolean
</div><div class="floatbox"><span class="access">(read)</span></div><br class="clear" /></div></div><div class="description"> Indicates whether there is an active drag operation. </div></div><div class="member" id="relatedObject"><h3>relatedObject</h3><div class="fullMemberString"><div class="floatholder"><div class="floatbox code"><b>relatedObject</b>:Object
</div><div class="floatbox"><span class="access">(read,write)</span></div><br class="clear" /></div></div><div class="description"> Arbitrary data to associate with this drag operation. This is usually used to reference the object the drag originated from. </div></div><div class="member" id="removeTarget"><h3>removeTarget</h3><div class="fullMemberString"><div class="floatholder"><div class="floatbox code"><b>removeTarget</b>:Boolean = <span class="codeIdentifier">false</span>
</div><div class="floatbox"><span class="access">(read,write)</span></div><br class="clear" /></div></div><div class="description"> Indicates whether the target will be removed when the drag finishes. This is automatically set to true when using a linkageID for the target parameter of a startDrag operation, and false otherwise. You can override this default value after calling startDrag. For example, you may want to do this so that you can animate the avatar back into position. </div></div><div class="member" id="target"><h3>target</h3><div class="fullMemberString"><div class="floatholder"><div class="floatbox code"><b>target</b>:MovieClip
</div><div class="floatbox"><span class="access">(read)</span></div><br class="clear" /></div></div><div class="description"> Returns the target (avatar) of the currently active drag operation, or null if there is not an active drag. </div></div></div><div class="memberSection"><h2 id="Instancemethods">Instance methods</h2><div class="member" id="cancelDrag"><h3>cancelDrag</h3><div class="fullMemberString"><div class="floatholder"><div class="floatbox code">function <b>cancelDrag</b> (
</div><div class="code">) : Void</div><br class="clear" /></div></div><div class="description"> Stops an active drag operation, and dispatches the "dragEnd" event with the cancelled flag set to true. The cancel flag indicates to listeners that they should not act on the drop. </div></div><div class="member" id="initiateDrag"><h3>initiateDrag</h3><div class="fullMemberString"><div class="floatholder"><div class="floatbox code">function <b>initiateDrag</b> (

</div><div class="code">data:Object,
relatedObject:Object) : Void</div><br class="clear" /></div></div><div class="description"> Sets the data and inDrag properties, and dispatches the "dragBegin" event. This method is useful for if you want to utilize custom drag logic, but still take advantage of DragManager's events. </div><div class="boxWithBorder"><div class="boxedElem"><div class="contentHolder"><span class="title">Parameters:</span><div class="item"><div class="floatbox code colorizedCode">data         <span class="itemSeparator">:</span></div><div>Data representing the object being dragged. This will be included with all events associated with this drag, and is accessible during the drag via the .data property.</div></div><div class="item"><div class="floatbox code colorizedCode">relatedObject<span class="itemSeparator">:</span></div><div>Arbitrary data to associate with this drag operation. This is usually used to reference the object the drag originated from.</div></div></div></div></div></div><div class="member" id="startDrag"><h3>startDrag</h3><div class="fullMemberString"><div class="floatholder"><div class="floatbox code">function <b>startDrag</b> (






</div><div class="code">pressOrigin:MovieClip,
avatar:Object,
data:Object,
relatedObject:Object,
alignmentTarget:MovieClip,
lockCenter:Boolean,
bounds:Object) : MovieClip</div><br class="clear" /></div></div><div class="description"> Starts a drag operation. This will automatically call initiateDrag to notify any drag listeners. </div><div class="boxWithBorder"><div class="boxedElem"><div class="contentHolder"><span class="title">Parameters:</span><div class="item"><div class="floatbox code colorizedCode">pressOrigin    <span class="itemSeparator">:</span></div><div>The MovieClip that was pressed to begin this drag. In order for drags to work correctly, the press origin must have its trackAsMenu property set to true. This optional parameter allows DragManager to set this property, and revert it when the drag ends.</div></div><div class="item"><div class="floatbox code colorizedCode">avatar         <span class="itemSeparator">:</span></div><div>A movie clip reference or a linkage string to use as the avatar to drag. If a string is specified DragManager will attempt to instantiate the avatar in the reserved clip on the _root so that it appears over top of all UI elements. If null is specified, no avatar will be used.</div></div><div class="item"><div class="floatbox code colorizedCode">data           <span class="itemSeparator">:</span></div><div>Data representing the object being dragged. This will be included with all events associated with this drag, and is accessible during the drag via the .data property.</div></div><div class="item"><div class="floatbox code colorizedCode">relatedObject  <span class="itemSeparator">:</span></div><div>Arbitrary data to associate with this drag operation. This is usually used to reference the object the drag originated from.</div></div><div class="item"><div class="floatbox code colorizedCode">alignmentTarget<span class="itemSeparator">:</span></div><div>A MovieClip to base initial position on. For example passing in the icon instance that was clicked to initiate the drag would position the avatar in the same position.</div></div><div class="item"><div class="floatbox code colorizedCode">lockCenter     <span class="itemSeparator">:</span></div><div>Locks the drag target's origin to the cursor position.</div></div><div class="item"><div class="floatbox code colorizedCode">bounds         <span class="itemSeparator">:</span></div><div>(optional) Object containing drag constraints for the target using in the target's parent's coordinates. Can contain "left", "right", "bottom", and "top" properties for drag bounds. If any bound property is undefined, it will default to have no boundary.</div></div></div></div><div class="boxedElem"><div class="contentHolder"><span class="title">Returns:</span><div class="item"><ul><li> The target clip that will be dragged, this is either the reference passed in as the target parameter, the clip that was instantiated from the specified linkage id, or null. </li></ul></div></div></div></div></div><div class="member" id="stopDrag"><h3>stopDrag</h3><div class="fullMemberString"><div class="floatholder"><div class="floatbox code">function <b>stopDrag</b> (
</div><div class="code">) : Void</div><br class="clear" /></div></div><div class="description"> Stops an active drag operation, and dispatches the "endDrag" event with the cancelled flag set to false. This method can be used with drag operations initiated by both startDrag and initiateDrag. </div></div><div class="member" id="update"><h3>update</h3><div class="fullMemberString"><div class="floatholder"><div class="floatbox code">function <b>update</b> (
</div><div class="code">) : Void</div><br class="clear" /></div></div><div class="description"> Repositions the drag target relative to the cursor position. Useful if you manually adjust the dragOffset properties and want to immediately updat the target position. </div></div></div><div class="footer"><ul class="docFooter"></ul></div></div></div></body></html>